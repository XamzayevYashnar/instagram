{% extends "base.html" %}
{% block content %}
<div class="container mt-4">
    <div class="card mx-auto shadow-sm border-0" style="max-width: 500px;">
        <div class="card-header bg-light d-flex justify-content-between align-items-center">
            <strong>{{ story.user.username }}</strong>
            <small class="text-muted">{{ story.created_at|timesince }} oldin</small>
        </div>

        <div class="card-body text-center">
            {% if story.media.url %}
                {% if is_video %}
                    <video controls autoplay class="rounded-3 shadow-sm" style="width:100%;">
                        <source src="{{ story.media.url }}" type="video/mp4">
                    </video>
                {% else %}
                    <img src="{{ story.media.url }}" alt="Story media" class="img-fluid rounded-3 shadow-sm">
                {% endif %}
            {% endif %}

            {% if story.caption %}
                <p class="mt-2">{{ story.caption }}</p>
            {% endif %}

            <!-- Nechta odam ko‚Äòrganligi -->
            <p class="text-muted mt-3">üëÅ {{ view_count }} ta odam ko‚Äòrdi</p>

            <!-- Ko‚Äòruvchilar ro‚Äòyxati -->
            <ul class="list-unstyled">
                {% for v in viewers %}
                    <li class="d-flex align-items-center mb-2">
                        <img src="{{ v.viewer.avatar.url }}" 
                             class="rounded-circle me-2 shadow-sm" 
                             width="35" height="35" alt="avatar">
                        <span>{{ v.viewer.username }}</span>
                    </li>
                {% empty %}
                    <li class="text-muted">Hali hech kim ko‚Äòrmagan üëÄ</li>
                {% endfor %}
            </ul>
        </div>
    </div>
</div>
{% endblock %}